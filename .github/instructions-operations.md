# 运维岗位 Copilot 使用指南

本指南适用于运维工程师和 DevOps 工程师，帮助您更高效地使用 GitHub Copilot 完成运维相关工作。

## 适用场景

### 脚本编写

使用 Copilot 辅助编写各类运维脚本：

- Shell 脚本
- Python 自动化脚本
- 批处理脚本
- 定时任务脚本

**提示词示例：**
```
请帮我编写一个服务器健康检查脚本，包括：
- CPU 和内存使用率检查
- 磁盘空间检查
- 关键服务状态检查
- 异常告警通知
```

### 配置管理

- Ansible playbook
- Terraform 配置
- Kubernetes YAML
- Docker Compose

### CI/CD 流水线

- GitHub Actions
- Jenkins Pipeline
- GitLab CI
- 部署脚本

### 监控告警

- 监控指标配置
- 告警规则定义
- 日志分析脚本
- 仪表板配置

## 最佳实践

### Shell 脚本编写

```
请编写 Shell 脚本实现以下功能：
功能：[功能描述]

要求：
- 添加错误处理
- 记录操作日志
- 支持参数传入
- 添加使用说明
```

### Dockerfile 编写

```
请为以下应用编写 Dockerfile：
应用类型：[语言/框架]
基础镜像：[镜像名称]
依赖：[依赖列表]

要求：
- 多阶段构建
- 最小化镜像大小
- 非 root 用户运行
- 健康检查
```

### Kubernetes 配置

```
请生成 Kubernetes 部署配置：
应用名称：[名称]
镜像：[镜像地址]
副本数：[数量]

包含：
- Deployment
- Service
- ConfigMap
- 资源限制
- 健康检查
```

## 常用提示词模板

### GitHub Actions 工作流

```
请创建 GitHub Actions 工作流：
触发条件：[push/pull_request/schedule]
任务步骤：
1. [步骤1]
2. [步骤2]
...

要求：
- 缓存依赖
- 并行执行
- 失败通知
- 密钥管理
```

### Ansible Playbook

```
请编写 Ansible Playbook：
目标：[配置目标]
操作系统：[OS 类型]

任务：
- [任务1]
- [任务2]
...

要求：
- 幂等性
- 变量化配置
- 错误处理
- 标签分类
```

### Terraform 配置

```
请编写 Terraform 配置：
云服务商：[AWS/Azure/GCP]
资源类型：[资源列表]

要求：
- 模块化设计
- 变量定义
- 输出值
- 状态管理
```

### 日志分析脚本

```
请编写日志分析脚本：
日志格式：[日志格式示例]
分析目标：
- [指标1]
- [指标2]

输出：
- 统计报告
- 异常告警
```

### 备份脚本

```
请编写数据备份脚本：
备份对象：[数据库/文件系统]
备份策略：[全量/增量]
保留周期：[天数]

要求：
- 压缩存储
- 完整性校验
- 备份轮转
- 失败告警
```

### 监控配置

```
请生成 Prometheus 告警规则：
监控对象：[服务/系统]
告警指标：
- [指标1]：阈值 [值]
- [指标2]：阈值 [值]

要求：
- 告警分级
- 抑制规则
- 恢复通知
```

## 故障排查

### 故障诊断辅助

```
请帮我分析以下故障：
症状：[故障表现]
日志：[相关日志]
环境：[环境信息]

提供：
- 可能原因
- 排查步骤
- 修复建议
- 预防措施
```

### 性能问题排查

```
请帮我排查以下性能问题：
问题描述：[性能问题]
监控数据：[性能指标]
系统配置：[配置信息]

分析：
- 瓶颈定位
- 优化建议
- 实施步骤
```

## 安全运维

### 安全加固脚本

```
请编写服务器安全加固脚本：
操作系统：[OS 类型]

加固项目：
- SSH 配置
- 防火墙规则
- 用户权限
- 日志审计
```

### 漏洞扫描配置

```
请配置漏洞扫描任务：
扫描范围：[IP/域名]
扫描类型：[端口/漏洞/配置]
执行计划：[频率]

输出：
- 扫描报告
- 风险等级
- 修复建议
```

## 注意事项

- 脚本中不要硬编码敏感信息
- 使用密钥管理工具管理凭据
- 所有变更需要在测试环境验证
- 重要操作需要有回滚方案
- 保持配置版本控制
- 定期审计和更新运维脚本
- 遵循最小权限原则
- 建立完善的监控和告警机制
