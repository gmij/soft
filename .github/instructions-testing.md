# 测试岗位 Copilot 使用指南

本指南适用于测试工程师和质量保证人员，帮助您更高效地使用 GitHub Copilot 完成测试相关工作。

## 项目背景

本项目是一个**软件下载资源站**，测试相关信息：

- **前端框架**：React + Ant Design
- **测试框架**：Jest + React Testing Library
- **E2E 测试**：Playwright 或 Cypress
- **构建验证**：GitHub Actions

### 核心测试场景

1. 资源目录扫描脚本测试
2. React 组件单元测试
3. 页面功能 E2E 测试
4. 构建流程验证

## 适用场景

### 测试用例设计

使用 Copilot 辅助设计全面的测试用例：

- 资源扫描逻辑测试
- 下载功能测试
- 页面组件测试
- 构建产物验证

**提示词示例：**
```
请帮我设计资源扫描脚本的测试用例，包括：
- 正常目录结构解析
- 存在 link.txt 的 P2P 资源识别
- 不存在 link.txt 的直接下载识别
- 空目录和异常情况处理
```

### 自动化测试

- **Jest**：单元测试框架，用于测试资源扫描脚本和工具函数
- **React Testing Library**：React 组件测试，验证用户交互行为
- **Playwright/Cypress**：E2E 端到端测试，模拟真实用户操作流程
- **GitHub Actions**：集成测试，验证完整的构建部署流程

### 构建验证

- 资源 JSON 生成验证
- 静态页面构建验证
- 部署产物检查
- 链接有效性验证

### 测试数据

- 模拟资源目录结构
- Mock 资源 JSON 数据
- 测试用下载文件
- link.txt 测试文件

## 最佳实践

### 资源扫描测试

使用 Copilot 生成资源扫描脚本的测试用例：

```
请为资源扫描脚本编写 Jest 测试：
测试场景：
- 标准目录结构 down/app/1.0.0/file.exe
- P2P 资源 down/app/1.0.0/link.txt
- 多版本资源
- 空目录处理
- 特殊字符文件名

使用 mock-fs 模拟文件系统
```

### React 组件测试

```
请为下载按钮组件编写测试用例：
测试框架：React Testing Library

测试场景：
- 直接下载按钮渲染
- P2P 下载按钮渲染
- 点击下载行为
- P2P 链接复制功能
```

### E2E 测试

```
请使用 Playwright 编写软件下载页面的 E2E 测试：

测试流程：
1. 访问首页
2. 点击软件卡片
3. 选择版本
4. 点击下载按钮
5. 验证下载行为

验证点：
- 页面正确加载
- 版本切换正常
- 下载链接有效
```

## 常用提示词模板

### 目录结构测试数据

```
请生成资源扫描测试的目录结构：
使用 mock-fs 格式

包含场景：
- 单个软件单版本
- 单个软件多版本
- 多个软件
- P2P 和直接下载混合
- 边界情况（空目录、无效结构）
```

### Ant Design 组件测试

```
请编写 Ant Design 组件的测试用例：
组件：[Card/Select/Button 等]

测试要点：
- 组件正确渲染
- 用户交互响应
- Props 变化处理
- 样式类名验证
```

### 构建流程测试

```
请设计 GitHub Actions 构建流程的测试方案：

验证内容：
- 资源扫描脚本执行成功
- resources.json 生成正确
- React 构建无错误
- 构建产物包含所需文件
```

### 链接有效性测试

```
请编写下载链接有效性测试脚本：

测试内容：
- 直接下载链接可访问
- P2P 链接格式正确
- 静态资源路径正确
- 404 页面处理
```

## 注意事项

- 使用 mock-fs 模拟文件系统，避免依赖真实目录
- React 组件测试关注用户交互而非实现细节
- E2E 测试需要先完成构建流程
- 测试 P2P 链接格式而非实际可用性
- GitHub Actions 测试注意运行环境差异
- 静态站点测试需要考虑路径问题
